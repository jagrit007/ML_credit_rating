<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Model Prediction Form</title>
    <!-- Add Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            background-image: url('https://www.toptal.com/designers/subtlepatterns/uploads/oriental-tiles.png');
            /* background-image: url('https://gitea.jagrit.dev/jagrit007/static_assets/raw/commit/1741955cd50ad4852fcf8997447b3196ae518a75/images/always-grey.png'); */
            /* background-repeat: repeat; */
            font-family: 'Poppins', sans-serif;
            color: #333;
        }

        .card {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .form-select {
            background-color: #f8f9fa;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 14px;
            color: #333;
            padding: 10px;
        }

        .form-select option {
            background-color: #f8f9fa;
            border: none;
            font-size: 15px;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            color: #2d2d2d;
        }

        .card-header h1 {
            font-size: 3.25rem;
            font-weight: 500;
            text-align: center;
            margin: 20px;
            color: #2d2d2d;
        }

        .form-label {
            font-size: 16px;
            font-weight: medium;
            color: #333;
        }

        .form-control {
            background-color: #f8f9fa;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 14px;
            color: #333;
            padding: 10px;
        }

        .btn-primary {
            text-align: center;
            background-color: #007bff;
            border-color: #007bff;
            font-size: 16px;
            font-weight: bold;
            padding: 10px 20px;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="card shadow">
            <div class="card-header">
                <h1>ML Model Prediction Form</h1>
            </div>
            <div class="card-body">
                <form id="predictionForm">
                    <div class="mb-3">
                        <label for="CHK_ACCT" class="form-label">Checking Account Status:</label>
                        <select id="CHK_ACCT" name="CHK_ACCT" required class="form-select">
                            <option value="0DM">0DM</option>
                            <option value="less-200DM">less than 200DM</option>
                            <option value="no-account">No Account</option>
                            <option value="over-200DM">Over 200DM</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="Duration" class="form-label">Duration of Credit (months):</label>
                        <input type="number" id="Duration" name="Duration" required class="form-control">
                    </div>

                    <div class="mb-3">
                        <label for="History" class="form-label">History of Credit:</label>
                        <select id="History" name="History" required class="form-select">
                            <option value="all-paid-duly">All Paid Duly</option>
                            <option value="bank-paid-duly">Bank Paid Duly</option>
                            <option value="critical">Critical</option>
                            <option value="delay">Delay</option>
                            <option value="duly-till-now">Duly Till Now</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="Purpose_of_credit" class="form-label">Purpose of Credit:</label>
                        <input type="text" id="Purpose_of_credit" name="Purpose_of_credit" required class="form-control">
                    </div>

                    <div class="mb-3">
                        <label for="Credit_Amount" class="form-label">Credit Amount Required:</label>
                        <input type="number" id="Credit_Amount" name="Credit_Amount" required class="form-control">
                    </div>

                    <div class="mb-3">
                        <label for="Balance_in_Savings_AC" class="form-label">Balance in Savings AC:</label>
                        <select id="Balance_in_Savings_AC" name="Balance_in_Savings_AC" required class="form-select">
                            <option value="less1000DM">Less than 1000DM</option>
                            <option value="less100DM">Less than 100DM</option>
                            <option value="less500DM">Less than 500DM</option>
                            <option value="over1000DM">Over 1000DM</option>
                            <option value="unknown">Unknown</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="Employment" class="form-label">Employment:</label>
                        <select id="Employment" name="Employment" required class="form-select">
                            <option value="four-years">Four years</option>
                            <option value="one-year">One year</option>
                            <option value="over-seven">Over seven years</option>
                            <option value="seven-years">Seven years</option>
                            <option value="unemployed">Unemployed</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="Install_rate" class="form-label">Installment Rate:</label>
                        <input type="number" id="Install_rate" name="Install_rate" required class="form-control">
                    </div>

                    <div class="mb-3">
                        <label for="Marital_status" class="form-label">Marital Status:</label>
                        <select id="Marital_status" name="Marital_status" required class="form-select">
                            <option value="female-divorced">Female Divorced</option>
                            <option value="male-divorced">Male Divorced</option>
                            <option value="married-male">Married Male</option>
                            <option value="single-male">Single Male</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="Co_applicant" class="form-label">Type of Applicant:</label>
                        <select id="Co_applicant" name="Co_applicant" required class="form-select">
                            <option value="co-applicant">Co-applicant</option>
                            <option value="guarantor">Guarantor</option>
                            <option value="none">None</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="Present_Resident" class="form-label">Present Resident:</label>
                        <input type="number" id="Present_Resident" name="Present_Resident" required class="form-control">
                    </div>

                    <div class="mb-3">
                        <label for="Real_Estate" class="form-label">Real Estate:</label>
                        <select id="Real_Estate" name="Real_Estate" required class="form-select">
                            <option value="building-society">Building Society</option>
                            <option value="car">Car</option>
                            <option value="none">None</option>
                            <option value="real-estate">Real Estate</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="Age" class="form-label">Age:</label>
                        <input type="number" id="Age" name="Age" required class="form-control">
                    </div>

                    <div class="mb-3">
                        <label for="Other_installment" class="form-label">Other Installment:</label>
                        <select id="Other_installment" name="Other_installment" required class="form-select">
                            <option value="bank">Bank</option>
                            <option value="none">None</option>
                            <option value="stores">Stores</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="Residence" class="form-label">Residence:</label>
                        <select id="Residence" name="Residence" required class="form-select">
                            <option value="free">Free</option>
                            <option value="own">Own</option>
                            <option value="rent">Rent</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="Num_Credits" class="form-label">Number of Credits:</label>
                        <input type="number" id="Num_Credits" name="Num_Credits" required class="form-control">
                    </div>

                    <div class="mb-3">
                        <label for="Job" class="form-label">Job:</label>
                        <select id="Job" name="Job" required class="form-select">
                            <option value="management">Management</option>
                            <option value="skilled">Skilled</option>
                            <option value="unemployed-non-resident">Unemployed Non-Resident</option>
                            <option value="unskilled-resident">Unskilled Resident</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="No_dependents" class="form-label">Number of Dependents:</label>
                        <input type="number" id="No_dependents" name="No_dependents" required class="form-control">
                    </div>

                    <div class="mb-3">
                        <label for="Phone" class="form-label">Phone:</label>
                        <select id="Phone" name="Phone" required class="form-select">
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="Foreign" class="form-label">Foreign:</label>
                        <select id="Foreign" name="Foreign" required class="form-select">
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-primary">Predict</button>
                </form>
            </div>
            <div class="card-footer">
                <div id="predictionResult" class="alert alert-info d-none" role="alert"></div>
            </div>
        </div>
    </div>


    <!-- Add Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script>
        document.getElementById('predictionForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // Collect form data
            const formData = {
                CHK_ACCT: document.getElementById('CHK_ACCT').value,
                Duration: parseInt(document.getElementById('Duration').value),
                History: document.getElementById('History').value,
                Purpose_of_credit: document.getElementById('Purpose_of_credit').value,
                Credit_Amount: parseInt(document.getElementById('Credit_Amount').value),
                Balance_in_Savings_AC: document.getElementById('Balance_in_Savings_AC').value,
                Employment: document.getElementById('Employment').value,
                Install_rate: parseInt(document.getElementById('Install_rate').value),
                Marital_status: document.getElementById('Marital_status').value,
                Co_applicant: document.getElementById('Co_applicant').value,
                Present_Resident: parseInt(document.getElementById('Present_Resident').value),
                Real_Estate: document.getElementById('Real_Estate').value,
                Age: parseInt(document.getElementById('Age').value),
                Other_installment: document.getElementById('Other_installment').value,
                Residence: document.getElementById('Residence').value,
                Num_Credits: parseInt(document.getElementById('Num_Credits').value),
                Job: document.getElementById('Job').value,
                No_dependents: parseInt(document.getElementById('No_dependents').value),
                Phone: document.getElementById('Phone').value,
                Foreign: document.getElementById('Foreign').value
            };

            // Convert form data to JSON
            const jsonData = JSON.stringify(formData);

            // Make POST request to FastAPI endpoint
            fetch('http://150.230.143.59:8000/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: jsonData
            })
            .then(response => response.json())
            .then(data => {
                const predictionResult = document.getElementById('predictionResult');
                predictionResult.innerText = `Prediction: ${data.prediction=='good'?'Good 😌':'Bad 🤨'}`;
                predictionResult.classList.remove('alert-info');
                if (predictionResult.classList.contains('alert-success')){
                    predictionResult.classList.remove('alert-success');
                }
                if (predictionResult.classList.contains('alert-danger')){
                    predictionResult.classList.remove('alert-danger');
                }
                predictionResult.classList.add(data.prediction === 'good' ? 'alert-success' : 'alert-danger');
                predictionResult.classList.remove('d-none');
            })
            .catch(error => {
                console.error('Error:', error);
                const predictionResult = document.getElementById('predictionResult');
                predictionResult.innerText = 'Error: Prediction failed.';
                predictionResult.classList.remove('alert-info');
                predictionResult.classList.add('alert-danger');
                predictionResult.classList.remove('d-none');
            });
        });
    </script>
</body>
</html>
